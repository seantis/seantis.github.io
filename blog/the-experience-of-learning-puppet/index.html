<!doctype html>
<html class="no-js" lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>The Experience of Learning Puppet</title><link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,800,700,600" rel="stylesheet" type="text/css"><link href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic" rel="stylesheet" type="text/css"><link rel="stylesheet" href="../../static/css/normalize.min.css"><link rel="stylesheet" href="../../static/css/foundation.min.css "><link rel="stylesheet" href="../../static/css/ionicons.min.css "><link rel="stylesheet" href="../../static/css/app.css"><link rel="stylesheet" href="../../static/css/prism.css"><script src="../../static/js/custom.modernizr.js"></script></head><body><div class="row"><div class="large-3 push-9 columns"><div id="logo"><a id="brand" class="brand" href="../../"><img src="../../static/img/logo.svg" alt="seantis gmbh"></a></div></div><div class="large-9 pull-3 columns"><div id="navigation"><ul class="left" id="nav-tabs"><li><a href="../../portrait/"><i class="icon-ios7-people"></i> Portrait</a></li><li><a href="../../engineering/"><i class="icon-ios7-gear"></i> Engineering</a></li><li><a href="../../services/"><i class="icon-cloud"></i> Services</a></li><li><a href="../../success-stories/"><i class="icon-image"></i> Erfolgsgeschichten</a></li><li><a href="../../news/"><i class="icon-speakerphone"></i> News</a></li><li><a href="../../blog/"><i class="icon-chatbox"></i> Blog</a></li></ul></div></div></div><div class="row hide-for-small"><div class="large-12 columns"><div id="banner" style="background-image: url(../../static/img/scqm.png);"><div class="large-5 large-offset-7 columns"><h4 class="subheader">Clinical Quality Management System</h4><p>Die interdisziplinäre medizinische Patientenakte unterstützt Ärzte bei der medizinischen Dokumentation über den gesamten Behandlungsverlauf.</p><a href="https://www.healthdata.ai">mehr &rarr;</a></div></div><div id="portlets-in-header"></div></div></div><div class="row"><div class="large-8 columns"><ul class="breadcrumbs"><li><a href="#"><i class="icon-home"></i></a></li><li><a href="/blog">Blog</a></li><li class="current">The Experience of Learning Puppet</li></ul></div><div class="large-4 columns" id="search"><form id="searchbox" action="../../search/"><div class="row collapse"><div class="small-10 columns"><input type="text" name="q" id="tipue_search_input" autocomplete="off" requiredclass="search-query" placeholder="Suche"></div><div class="small-2 columns"><button type="submit" class="postfix"><i class="icon-search"></i></button></div></div></div></form></div><div class="row"><div class="large-8 columns"><div id="content"><div class="actionDate">13.06.2012</div><h1>The Experience of Learning Puppet</h1><div class="documentDescription"></div><p>About a month ago I started introducing puppet to our infrastructure at <a href="https://www.seantis.ch">seantis</a>. After ploughing through <a href="http://www.apress.com/9781430230571">Pro Puppet</a> I was able to declare our basic configuration needs, setup the basic infrastructure and deploy two servers in no time.</p><p>The experience I made is the basis for this post.</p><h2>Why Puppet</h2><p>Before betting on puppet I had a good look at what is out there. Basically, I looked at Puppet and Chef, both ruby based systems for automating configuration. Other options like <a href="http://saltstack.org/">Salt</a> or <a href="http://cfengine.com/">Cfengine</a> I dismissed since they seem rather new or old, respectively.</p><p>The big difference between Puppet and Chef, as any article will tell you, is the fact that Chef is an extension to Ruby, while Puppet relies on its own declarative configuration language per default.</p><p>As I liked the idea of declaring my needs, instead of just writing ruby code, I went for the Puppet road.</p><p>(At this point I should probably spend a month with Chef, but who has that kind of time?)</p><h2>Starting Out</h2><p>Puppet is easy to like. The initial setup with <a href="http://www.vagrantup.com">Vagrant</a> was simple and really helped me working out the kinks of my initial manifests.</p><p>Similarly, setting up a Puppetmaster and connecting an agent to it is something you don’t need a PHD for. There’s certainly some amount of reading required to have a basic understanding, but it’s neither brain surgery nor rocket science.</p><h2>It Gets Complex Fast</h2><p>Puppet has the concept of modules. Being used to write reusable code I pretty much started using them for any service I could think of. Setup Mysql? Use a module. Define Users? Use a module. And so on.</p><p>Unfortunately, this is the point where documentation gets kinda thin. It’s nice if you can set up your a Trac project with two lines of code after you’ve hidden all the nitty gritty in some module. It’s really what I hoped to gain by declaring my configs. No more going crazy on the shell for 10 minutes to set up everything. No more silly mistakes. Set it, forget it.</p><p>But then you realize that you coupled your Trac module too closely with the Nginx configuration. So you move some code out. You then realize that for another project to live on the same server you need to completely rethink your approach because you are not flexible enough.</p><p>It’s all still okay, mind you. You can test your changes locally, you can do some real life staging and once you update your production machine you can be reasonably sure that nothing unexpected will happen.</p><p>That’s of course what a learning curve looks like, but I was still somewhat unprepared for the fast increase in complexity of my configurations.</p><h2>Puppet Forge to the Rescue?</h2><p>Whenever a smaller mind like yours truly encounters problems it goes off to wander around open source land. The <a href="http://forge.puppetlabs.com">Puppet Forge</a> and numerous Github projects are waiting to be studied.</p><p>Unfortunately, it’s not like shopping for a nice Python module in the Cheeseshop. It is quite hard to find a module that suits your needs. If you find one it is then hard to assess the quality of said module. At least for novices like me.</p><p>I mean I did find good modules, like the <a href="https://github.com/puppetlabs/puppetlabs-mysql">Mysql module from Puppetlabs</a> (though my Mysql needs are really basic). But I also encountered a number of modules which just didn’t seem like the kind of modules I would want to use on our infrastructure.</p><p>For example <a href="https://github.com/puppetlabs/puppetlabs-nginx">Puppetlabs’ own Nginx module</a> which has a listen_port parameter in the vhost resource which does nothing. A bug which was fixed in another fork months ago and has since been sitting around <a href="https://github.com/puppetlabs/puppetlabs-nginx/pull/15">waiting to be pulled</a>.</p><p>I mean I know that Puppetlabs’ modules are not an official part of puppet, but as someone who is starting out it is still kinda surprising to me that a bug like that wouldn’t be fixed quicker. A module by the people who wrote puppet just seems like a module you would want to trust.</p><h2>Do Modules Really Work?</h2><p>At this point I’m starting to wonder just how feasible community modules really are. From the modules I wrote and the modules I looked at I get the feeling that it is very hard to write a good module that supports different, complex use cases.</p><p>The fork-jungle that is puppetlabs-nginx suggests that you end up writing your own version of a module quickly. Which of course is a bit of a problem, because it gets very hard to figure out which module to use. So you fork your own. Or write your own. And who wants to do that? There are certainly more interesting things to work on.</p><h2>Summing Up</h2><p>I do like Puppet and it certainly helped a lot already. Even if just for the fact that it forced me to really understand all the steps involved in configuring our servers. But Puppet is not yet something that feels completely solid. At least not for complex use cases. At least not to me.</p><p>But, I am keen to learn a great deal more about it so my views are surely up for changing. And what do I know, really?</p><p>Also visit my personal blog: <a href="http://blog.stacktrace.ch"><strong>http://blog.stacktrace.ch</strong></a></p><div id="tipue_search_content"></div></div></div><div class="large-4 columns"><ul class="vcard"><li class="fn">seantis gmbh</li><li class="street-address">Unter der Egg 5</li><li><span class="zip">CH-6004</span><span class="state">Luzern</span></li><li class="phone"><i class="icon-ios7-telephone"></i> +41 41 511 22 50</li><li class="email"><i class="icon-at"></i><a href="mailto:info@seantis.ch">info@seantis.ch</a></li></ul><div id="right-column"><div><dl class="porletNews"><dt><a href="../../news/">News </a>&<a href="../../blog/"> Blog</a></dt><dd class="newsItem"><a href="../../news/wahlen-abstimmungen-st-gallen/">Onlineportal für Wahl- und Abstimmungsresultate des Kantons St. Gallen</a></li></dd><dd class="newsItem"><a href="../../news/open-data-conference/">Offizieller Partner der Open Data Konferenz in Luzern</a></li></dd><dd class="newsItem"><a href="../../blog/open-aviation-data/">Open Aviation Data</a></li></dd><dd class="newsItem"><a href="../../blog/stable-marriage/">Ein Nobelpreis, stabile Ehen und die Zuteilung von Kindern auf Ferienpassangebote</a></li></dd></dt></div><div></div></div></div></div><footer class="row"><div class="large-12 columns"><hr><div id="portlets-in-footer" class="row"><div class="large-12 columns"><div class="row"><div id="portlets-in-footer-1" class="large-4 columns"></div><div id="portlets-in-footer-2" class="large-4 columns"></div><div id="portlets-in-footer-3" class="large-4 columns"></div></div><div class="row"><div id="portlets-in-footer-4" class="large-12 columns"></div></div></div></div><div class="row"><div class="large-8 columns"><p>&copy; 2005 - 2016 by seantis gmbh | <a href="https://www.getlektor.com">Lektor</a> powered &amp; built with <a href="https://www.python.org">Python</a></p></div><div class="large-4 columns"><ul class="inline-list right"><li id="siteaction-webmail"><a href="https://webmail.seantis.ch" accesskey title="Webmail">Webmail</a></li></ul></div></div></div></footer><script src="../../static/js/jquery.min.js"></script><script src="../../static/js/foundation.min.js"></script><script src="../../static/js/prism.min.js"></script><script src="../../static/js/tipuesearch_set.js"></script><script src="../../static/js/tipuesearch.min.js"></script><script>
            $(document).foundation();
            $(document).ready(function() {
                $('#tipue_search_input').tipuesearch({
                  'mode': 'json',
                  'contentLocation': "../../static/js/tipuesearch_content__primary.json"
                });
            });

            var _paq = _paq || [];
            _paq.push(['trackPageView']);
            _paq.push(['enableLinkTracking']);
            (function() {
                var u="//stats.seantis.ch/";
                _paq.push(['setTrackerUrl', u+'piwik.php']);
                _paq.push(['setSiteId', '15']);
                var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
                g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
            })();
        </script></body></html>